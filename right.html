<!DOCTYPE html>
<html>
    <head>
	<title>うさのこメモ｜ページトップへ戻るボタン</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="css/reset.css" />
        <link rel="stylesheet" type="text/css" href="css/style.css" />
	<script src="js/shCore.js"></script>
	<script src="js/shBrushJScript.js"></script>
	<script src="js/shBrushXml.js"></script>
	<link rel="stylesheet" href="css/shCore.css">
	<link rel="stylesheet" href="css/shThemeEmacs.css">
	<script>SyntaxHighlighter.all();</script>
    </head>
    <body>
	<div id="container">
	    <div id="content">
		<section>
		    <p>ページトップへ戻るボタンサンプルです。<br>
			下へスクロールするとボタンがあります。</p>
		    <pre class="brush:js">
$(function () {
    $("#btn_top").click(function () {
    $('html,body').animate({scrollTop: 0}, 'slow', 'swing');
	return false;
    });
});
		    </pre>
		</section>

		<section>
		    <p>スクロールすると出現し、フッターの高さで付随をキャンセルするやり方は以下の通り。</p>
		    <pre class="brush:js">
$("#pagetop").hide();
    // ↑pagetopを非表示にする

$(window).bind("scroll", function () {
    // トップから120px以上スクロールしたら
    if ($(this).scrollTop() > 100) {
	// ページトップのリンクをフェードインする
	$("#pagetop").fadeIn();
    } else { // それ以外は
	// ページトップのリンクをフェードアウトする
	$("#pagetop").fadeOut();
    }

    // フッター固定する

    scrollHeight = $(document).height();
    // ドキュメントの高さ
    scrollPosition = $(window).height() + $(window).scrollTop();
    //　ウィンドウの高さ+スクロールした高さ→　現在のトップからの位置
    footHeight = $("#footer").innerHeight();
    // フッターの高さ

    if (scrollHeight - scrollPosition <= footHeight - 15) {
	// 現在の下から位置が、フッターの高さの位置にはいったら
	//  ".gotop"のpositionをabsoluteに変更し、フッターの高さの位置にする
	$("#pagetop").css({
	    "position": "absolute",
	    "right": 0,
	    "bottom": footHeight
	});
    } else {
	// それ以外の場合は元のcssスタイルを指定
	$("#pagetop").css({
	    "position": "fixed",
	    "right": 0,
	    "bottom": 15
	});
    }
});
		    </pre>
		</section>

		<ul>
		    <li><a href="right.html">横からにょきっと出てくるボタン→</a></li>
		</ul>
	    </div>

	    <div id="pagetop"><a id="btn_top" href=""><img src="img/btn_pagetop.png" alt="ページトップへ戻る"></a></div>

	    <footer id="footer">
		&copy; うさのこ
	    </footer>
	</div>

	<script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
	<script>
	    $(function () {
		$("#btn_top").click(function () {
		    $('html,body').animate({scrollTop: 0}, 'slow', 'swing');
		    return false;
		});

		$("#pagetop").hide();
		// ↑pagetopを非表示にする

		$(window).bind("scroll", function () {
		    // トップから120px以上スクロールしたら
		    if ($(this).scrollTop() > 100) {
			// ページトップのリンクをフェードインする
			$("#pagetop").fadeIn();
		    } else { // それ以外は
			// ページトップのリンクをフェードアウトする
			$("#pagetop").fadeOut();
		    }

		    // フッター固定する

		    scrollHeight = $(document).height();
		    // ドキュメントの高さ
		    scrollPosition = $(window).height() + $(window).scrollTop();
		    //　ウィンドウの高さ+スクロールした高さ→　現在のトップからの位置
		    footHeight = $("#footer").innerHeight();
		    // フッターの高さ

		    if (scrollHeight - scrollPosition <= footHeight) {
			// 現在の下から位置が、フッターの高さの位置にはいったら
			//  ".gotop"のpositionをabsoluteに変更し、フッターの高さの位置にする
			$("#pagetop").css({
			    "position": "absolute",
			    "right": 10,
			    "bottom": footHeight + 10
			});
		    } else {
			// それ以外の場合は元のcssスタイルを指定
			$("#pagetop").css({
			    "position": "fixed",
			    "right": 10,
			    "bottom": 10
			});
		    }
		});
	    });

	    SyntaxHighlighter.autoloader
		    (
			    "js jscript javascript  ../scripts/shBrushJScript.js",
			    "xml xhtml xslt html    h../scripts/shBrushXml.js"
			    );
	    SyntaxHighlighter.all();

	</script>
    </body>
</html>
